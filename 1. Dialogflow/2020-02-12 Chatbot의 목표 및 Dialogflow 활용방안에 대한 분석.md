# 1. Chatbot의 목표
> * 챗봇의 질문에 대한 응답 데이터를 챗봇 스스로 학습하여 계속 발전해 갈 수 있는 챗봇을 구현하는 것이 목표이다.
> * 사용자가 기계와 대화를 한다고 느끼는 것이 아닌, 실제 상담원(사람)과 대화하는 것 처럼 느껴지도록 만드는 것이 목표이다.

# 2. Dialogflow를 사용한 사례
### 2.1 KLM Royal Dutch Airlines (항공사 예약 챗봇)
 * KLM Royal Dutch Airlines는 글로벌 항공사이다. 이 항공사는 Facebook Messenger와 Dialogflow를 이용하여 항공권 티켓 예약을 도움을 주는 챗봇을 만들었다. 해당 챗봇은 사용자로부터 목적지, 시간을 요청하고 응답이 충족될 경우 개인정보를 작성하고, 어플리케이션을 통해 결제를 하고 예약을 확정받을 수 있다.
 
 * 이 항공사는 고객 예약 챗봇을 기반으로 업그레이드하여, Packing Service를 시작하였는데 챗봇이 사용자로부터 여행에 대한 정보를 요청받을 경우 해외여행시 필요한 비자, 준비물, 여행기간 중 목적지의 날씨등을 알려준다.
 
 * 대화순서: 목적지요청(챗봇) -> 목적지응답(사용자) -> 시간요청(챗봇) -> 시간응답(사용자) -> 개인정보작성 요청(챗봇) -> 개인정보작성(사용자) -> 어플리케이션을 통한 결제요청(챗봇) -> 결제완료(사용자) ->결제완료 후 예약내역 전송 및 좌석안내(챗봇)
 
### 2.2 Domino Pizza (피자 예약 챗봇)
 * Domino Pizza는 글로벌 피자 체인점이다. 도미노 피자는 어플리케이션(또는 구글 어시스턴트)을 통해 피자를 주문할 수 있는 챗봇을 만들었다. 해당 챗봇은 사용자로 부터 피자를 주문할 것인지, 주문한 피자의 위치를 알고싶은지 묻는다. 사용자는 둘 중 하나를 고르고 피자를 주문할 경우 피자의 종류, 개수, 토핑추가등을 입력한다. 챗봇은 주문확인을 도와주고 최종가격을 사용자에게 알려준다. 사용자가 결제를 하게 될 경우 챗봇은 결제내역을 사용자에게 보여준다. 결제 후 피자의 주문위치를 입력하였을 경우, 피자의 현재 배달위치를 챗봇이 알려준다.
 
 * 대화순서: 피자주문 or 위치추적을 사용자로 부터 요청(챗봇) -> 피자주문을 요청(사용자) -> 피자의 종류를 요청(챗봇) -> 피자의 종류 선택(사용자) ->피자의 갯수 요청(챗봇) -> 피자의 갯수 선택(사용자) -> 토핑추가 요청(챗봇) -> 토핑추가 선택(사용자) -> 최종가격 및 결제요청(챗봇) -> 결제완료 및 위치추적(사용자) -> 사용자에게 현재 피자의 위치를 전송(챗봇)
 
### 2.3 Ticket master (콘서트 티켓 예약 챗봇)
 * Ticketmaster는 라이브 이벤트 티켓팅 회사이다. Ticketmaster는 구글 어시스턴트를 이용하여 티켓팅 예약을 할 수 있는 챗봇을 만들었다. Dialogflow에 많은 아티스트를 학습시키고, 해당 아티스트를 입력시 관련된 콘서트이벤트를 사용자에게 알려준다. 결과로 나온 정보를 토대로 사용자는 티켓을 예약 및 결제를 진행할 수 있다. 또한, 이번주 콘서트 일정이나, 특정기간의 콘서트 기간일정을 요청할 경우 해당 기간에 진행하는 콘서트의 목록을 사용자에게 보여준다. 

### 2.4 분석결과
 * 위의 3개의 회사들이 챗봇의 플랫폼으로 Dialogflow를 선택한 이유는 다음과 같다.
    1. Dialogflow의 자연어 처리 능력(사용자의 질문으로 부터 의도를 잘 파악한다.)
    2. Dialogflow의 직관적인 UI를 통하여 개발자 및 사용자(업체직원)들이 쉽게 접근하고 챗봇을 학습시킬 수 있다.
    3. Dialogflow는 사용자가 증가합에따라 시스템을 쉽게 확장할 수 있다.
 
 * 모든 회사들은 현재의 챗봇에 만족하지 않고, 더 사람과 대화하는 것처럼 미세한 부분을 챗봇에게 학습시켜 세세한 부분 또한 응답할 수 있도록 챗봇의 성능을 개발하도록 노력하는 것 같다.
 
 * Dialogflow는 예약시스템과 주문시스템에 주로 활용이 되는 것 같고, 또 내가 생각하기에도 적합한 것 같다.
 
 # 3. Dialogflow와 내가 개발할 Chatbot의 적합성
 ### 3.1 내가 개발할 Chatbot의 모습
  * 1단계: 정해진 질문에 대한 응답만 제출할 수 있는 챗봇을 구현 -> 2단계: 사용자가 챗봇에게 코드와 같은 질문을 하였을 경우, 해당 질문과 가장 유사한 질문을 Q&A게시판(향후 구현)에서 찾아 추천(2단계에서는 질문에 대한 응답이 Q&A시스템에 존재할 경우 URL을 하이퍼링크로 사용자에게 제공해준다.)해주거나, 이미 챗봇이 알고 있는 내용일 경우 챗봇이 응답할 수 있도록 구현 -> 3단계: Q&A시스템에 응답을 특정한 검증과정을 거쳐 챗봇이 학습하여 다음에 비슷한 질문을 사용자가 챗봇에게 했을 때, 학습한 응답을 사용자에게 전송 -> 4단계: 챗봇이 모든 데이터를 학습하여 챗봇자체에서 단어를 조합해 새로운 문장을 제시하거나, 코드를 작성할 수 있도록 개발
  
### 3.2 Dialogflow의 분석
 * 1단계의 과정(단순한 질문에 대한 응답)에 대한 데이터를 직접 입력하여 챗봇에게 학습을 시키고 실행해 보았을 때, 정해진 질문(유사한 질문)에 대한 응답은 잘 동작하는 것으로 확인했다. 정해진 질문에서 똑같은 의미이지만, 조금만 틀에서 벗어난다면 챗봇은 이해하지 못한다. ex) 맞춤법무시, ,띄어쓰기 무시, 사투리등등 학습시켜본 결과 최대한 많은 유형의 질문들을 챗봇에 학습시키는 것이 중요하다.
 
 * 챗봇의 응답을 받았을 때, 엔터키가 지원되지 않는다는점 -> 가독성이 매우 떨어진다. 이를 해결하기 위해서는 챗봇과 연동되는 특정 어플리케이션을 이용해야한다.(페이스북 메신저, kik, Slack, Skype, Telegram integration) 이외의 플랫폼에서는 엔터키가 지원되지 않아 사용자들이 보기에 매우 불편하다. -> 직접 브라우저를 구성하거나 어플리케이션을 만들 경우 적합하지않음.
 
 * 특정 질문에 대한 응답을 지정하기 위해서는 개발자가 응답을 모아, 선택하여 응답을 등록해주는 방법이 있다. -> 무작위로 등록시 해당 질문에 대한 응답일치율이 떨어질 수 있고 그럴 경우 챗봇에 대한 신뢰도가 감소하게 됨.
 
 * 특정한 코드교육용 어플리케이션을 만들기 위해서는 코드 일부를 사용자에게 보여주고 괄호안의 코드를 박스로 선택, 직접입력하여 순서를 맞추는 식으로 진행을 하면 좋을것 같다는 생각이 들었다.(빈칸 채우기의 느낌)
### 3.3 Dialogflow에 질문을 보냈을때, 응답필드에 대한 분석
 1.	responseId: 응답 고유 식별자(매 응답마다 변경)
 2.	queryResult: Dialogflow에 요청하여 응답으로 받은 데이터
 3.	fulfillmentMessages: 대화의도에 맞게 Dialogflow 콘솔에 정의된 텍스트
 4.	outputContexts: 
 5.	queryText: 챗봇 사용자가 Dialogflow로 보낸 문자열 데이터
 6.	speechRecognitionConfidence: 음성인식에 대한 신뢰도 (현재 텍스트로 대화를 주고받기 때문에 신뢰도가 0)
 7.	action: 문자열을 보냈을 때 문맥 내에서 필수로 들어가야할 단어가 존재할 경우 답을 이끌어 내기 위한 문장을 전송할 때 사용되는 필드
 8.	parameters: 추출된 매개 변수의 모음
 9.	allRequiredParamsPresent: action and parameters에 저장되어 있는 단어가 모두 충족되었을 경우 true를 반환
 10.	fulfillmentText: Dialogflow에서 queryText에 대한 응답을 해당 필드에 전송
 11.	webhookSource: 웹 후크 호출로 쿼리를 수행한 경우 이 필드는 웹 후크 응답에 반환된 필드 값으로 설정
 12.	webhookPayload: 웹 후크 호출로 쿼리를 수행한 경우 이 필드는 페이로드후크 응답에 반환된 필드 값으로 설정
 13.	intent: 대화식 쿼리와 일치하는 의도
 14.	intentDetectionConfidence: 의도 탐지 신뢰도 값의 범위는 0.0에서 1.0으로 1에 가까울수록 정확한 값을 표현 
 15.	diagnosticInfo: 이 필드는 웹 후크 통화 지연과 웹 후크 오류에 대한 정보가 포함
 16.	languageCode: 현재 지원중인 언어의 코드
 17.	sentimentAnalysisResult: 감정분석결과
 18.	webhookStatus: 웹 후크 요청의 상태를 지정
 19.	outputAudio: 요청에 지정된대로 인코딩 된 오디오 데이터 바이트(base64로 인코딩)
 20.	outputAudioConfig: 음성 합성기에서 출력 오디오를 생성하는데 사용

# 4. 이외의 Chatbot플랫폼 또는 Chatbot유형
### 4.1 네이버 클라우드 플랫폼 Chatbot
 * 한국어 형태소 분석기를 사용한 학국어에 특화된 대화 모델링 가능
 * 유사한 의미를 지니는 문장을 엔진이 생성하여 학습
 * 다양한 질의/응답 유형 지원
 * 다양한 문장과 문법을 공부하고 중요한 정보를 기억하며, 추가로 전후 문맥을 보고 학습
 * 학습한 결과에 따른 정답을 위주로 사용자에게 답변을 추출
 
### 4.2 카카오 i
 * 카카오톡 채널 기반의 챗봇
 * 폴백 응답을 통해 챗봇이 학습한 데이터가 아닐 경우 사용자에게 챗봇의 기능을 알려줄 수 있다.
 * 바로 연결 기능과 제네릭 메뉴를 통해 챗봇의 고정적인 기능을 사용자에게 알려줄 수 있다.
 * 사용자가 챗봇이 파악하지 못한 발언을 했을 경우, 해당 데이터를 버리지 않고 목록화하여 개발자가 해당 발언을 본 뒤 학습을 할 것인지 무시를 할 것인지 학습할 수 있음
 * 네이버 클라우드 챗봇 시스템과 거의 유사
 * 외부 서버와 연동가능

### 4.3 단비(LG가 개발한 챗봇 플랫폼)
 * 형태소 분석 우선 추론과 머신러닝 우선 추론 방식 지원(데이터가 많을수록 머신러닝 우선 추론 방식이 유리)
 * 형태소 분석 우선 추론 방식은 형태소 분석을 통해 입력문과 가장 유사한 형태소를 가진 예문을 찾아 intent를 추론하는 방식
 * 머신러닝 우선 추론 방식은 머신러닝을 통하여 intent를 추론하는 방식
 * 그래프로 대화 흐름을 제어할 수 있어 쉽게 관리가 용이함
 * 다양한 메신저와 연동이 가능
 * 외부서버와 연동 가능
 
### 4.4 Q&A챗봇
 1) 엑셀챗봇
 * 특정 키워드(“반복”과 같은 단어)를 챗봇에게 전송했을 때 이와 관련된 기능(함수)을 사용자에게 제공
 * 문장을 통하여 사용자에게 질문을 했을 때 해당 문장에 대한 적절한 답변이 없을 경우 문장과 가장 유사한 질문에 대한 응답을 사용자에게 제공
 * 지능형으로 대화는 불가능, 단순한 기능소개 및 사용방법을 알려주는 챗봇

 2)심심이
 * 단순한 질문에 대한 응답으로 이루어진 챗봇
 * 동일한 말을 여러 번 하였을 때 똑같은 답을 계속 사용자에게 전송
 * 오타와 같은 부분에 대해서 단어를 파악 못하고 다른 답변을 사용자에게 전송
 * 사용자가 전송한 문맥의 흐름에 따라 대화하는 것이 아닌, 현재의 질문에 맞는 답변을 제공하는 것으로 보임
 * 가르치기 기능을 통해 질문에 대한 답변을 커스터마이징 할 수 있는 것으로 보임
	
 3)Replika(감정 대화 봇) 챗봇
 * 사용자와 챗봇 간에 이전에 대화한 기록을 가지고 있음
 * 다양한 대답을 하지만 사용자가 전송한 문장의 맥락을 이해하지 못하는 경우가 종종 있음
 * 지능형으로 대답을 하는 것이 아닌, 여러 응답 중에 하나를 사용자에게 발송하는 것으로 보임
 * 문장의 문법이 맞지 않는 경우 가장 유사한 질문에 대한 응답을 제공하는 것으로 보임

### 4.5 예약챗봇
 1)카카오톡 닥터쁘띠 예약 챗봇
 * 정해진 질문에 대한 답으로 예약을 할 수 있음
 * 정해진 질문 이외에 답을 할 경우 올바르지 않는 답이라 전송되며 다시 정해진 형식의 답을 도출하도록 유도
 * 대화가 불가능

 2)카카오 골프 예약
 * 위와 마찬가지로 챗봇이 할 수 있는 기능을 버튼 형식으로 나열하여, 사용자에게 선택지를 줌
 * 선택지에 대한 대답만 할 수 있음

### 4.6 이외의챗봇
 1) SKT 채티
 * 24시간 SKT 서비스에 대한 상담이 가능한 문자메시지 기반의 챗봇 서비스
 * 다른 회사의 챗봇과 다른 문자로 챗봇과 상담을 할 수 있다.
 * 이용가능한 서비스는 총 7가지로 휴대폰 서비스와 관련된 것들이다.
 * 형태소를 분석하여 사용자가 입력한 메시지를 판단, 서비스 기능 이외 대화는 불가능하다.
 * 서비스를 이용하게 되면 챗봇에서 숫자(1번,2번…)으로 사용자에게 선택할 수 있는 답변을 제공함

 2) AIA보험 인공지능 챗봇
 * 간단한 인사와 같은 대화는 가능하나, 상황(예 나는 운송업을 종사하는 사람인데, 나에게 추천해줄 수 있는 보험이 있니?)같은 긴 문장은 이해를 하지 못함
 * 짧은 문장만 이해할 수 있는 것으로 판단
 * 선택박스를 통한 사용자에게 사용할 수 있는 기능을 제시

 3) 삼성닷컴 챗봇
 * 대화도 가능하나, 정해진 질문 이외의 질문을 했을 경우, 챗봇이 이해하지 못함
 * 버튼 형식을 이용하여 대화의 흐름을 이어감

 4) 삼성카드 챗봇
 * 사용자의 문맥중 의도를 파악하여, 적절한 답변을 추출
 * 카드에 대한 정보를 사진과 간단설명으로 나열해 해당 사진을 클릭 시 상세정보로 이동
